import"./assets/modulepreload-polyfill-B5Qt9EMX.js";let i=[];fetch("public/users.json").then(e=>{if(!e.ok)throw new Error(`Ошибка загрузки: ${e.status}`);return e.json()}).then(e=>{i=e}).catch(e=>console.error(e));const m="feedback-form-state",o={form:document.querySelector(".feedback-form"),container:document.querySelector(".feedback-message"),title:document.querySelector(".sub-title"),result:document.querySelector(".text-1"),text2:document.querySelector(".text-2"),text3:document.querySelector(".text-3")};//! Парсим xml обменника
let n=null;fetch("public/exprates.xml").then(e=>e.text()).then(e=>{const t=new DOMParser().parseFromString(e,"application/xml"),a="WIRETHB",l="SBERRUB",s=Array.from(t.querySelectorAll("item")).find(u=>u.querySelector("from").textContent===a&&u.querySelector("to").textContent===l);s?(n=s.querySelector("out").textContent,console.log(`Курс ${a} → ${l}: ${n}`)):console.log("Курс не найден")}).catch(e=>console.error("Ошибка загрузки XML:",e));//! Сохраняем значения в localStorage
o.form.addEventListener("input",e=>{const t={email:e.currentTarget.elements.email.value};p(m,t)});d();//!  Загружаем данные из localStorage
function d(){const e=y(m);o.form.elements.email.value=(e==null?void 0:e.email)||""}//! Текущая дата
const c=new Date,x=String(c.getDate()).padStart(2,"0"),S=String(c.getMonth()+1).padStart(2,"0"),g=c.getFullYear(),f=`${x}.${S}.${g}`;console.log(f);//!  submit - выводим информацию
o.form.addEventListener("submit",e=>{if(e.preventDefault(),!e.currentTarget.elements.email.value){alert("Заполните поле Email для идентификации Вас");return}const r=e.currentTarget.elements.email.value.trim().toLowerCase(),t=i.find(a=>a.email.toLowerCase()===r);t?(o.title.textContent=`${t.username}, ${t.titleCourse}`,o.result.textContent=`Стоимость сессии ${t.price} Бат, что на сегодня ${f} по текущему курсу vipChanger 1 Бат = ${n} руб. составляет: ${Math.floor(t.price*n)} руб.`,o.text3.textContent=`Куратор: ${t.teacher}`,t.opt!==""?o.text2.textContent=`Стоимость ${t.opt}-x занятий составит - ${Math.floor(t.priceOpt*n*t.opt)} руб.`:o.text2.textContent=""):o.result.textContent="Такой электронной почты нет в списке",o.form.reset()});//! функция для LocalStorage
function p(e,r){const t=JSON.stringify(r);localStorage.setItem(e,t)}function y(e){const r=localStorage.getItem(e);try{return JSON.parse(r)}catch{return r}}
//# sourceMappingURL=index.js.map
